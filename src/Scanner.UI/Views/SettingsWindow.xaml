<Window x:Class="Scanner.UI.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Scanner Settings" Height="500" Width="400"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal" 
        TextOptions.TextRenderingMode="Auto"        
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Scanner Settings" 
                   Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                   Margin="0,0,0,24"/>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1">
            <StackPanel>
                <!-- Camera Settings -->
                <TextBlock Text="Camera Settings" 
                           Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                           Margin="0,0,0,16"/>

                <StackPanel Margin="0,0,0,24">
                    <TextBlock Text="Depth Mode" 
                               Style="{StaticResource MaterialDesignBody1TextBlock}"
                               Margin="0,0,0,8"/>
                    <ComboBox x:Name="DepthModeCombo" 
                              Margin="0,0,0,16">
                        <ComboBoxItem Content="NFOV 2x2 Binned (320x288)" IsSelected="True"/>
                        <ComboBoxItem Content="NFOV Unbinned (640x576)"/>
                        <ComboBoxItem Content="WFOV 2x2 Binned (512x512)"/>
                        <ComboBoxItem Content="WFOV Unbinned (1024x1024)"/>
                    </ComboBox>

                    <TextBlock Text="Color Resolution" 
                               Style="{StaticResource MaterialDesignBody1TextBlock}"
                               Margin="0,0,0,8"/>
                    <ComboBox x:Name="ColorResolutionCombo" 
                              Margin="0,0,0,16">
                        <ComboBoxItem Content="720p (1280x720)"/>
                        <ComboBoxItem Content="1080p (1920x1080)" IsSelected="True"/>
                        <ComboBoxItem Content="1440p (2560x1440)"/>
                        <ComboBoxItem Content="1536p (2048x1536)"/>
                        <ComboBoxItem Content="2160p (3840x2160)"/>
                    </ComboBox>

                    <TextBlock Text="Frame Rate" 
                               Style="{StaticResource MaterialDesignBody1TextBlock}"
                               Margin="0,0,0,8"/>
                    <ComboBox x:Name="FrameRateCombo">
                        <ComboBoxItem Content="5 FPS"/>
                        <ComboBoxItem Content="15 FPS"/>
                        <ComboBoxItem Content="30 FPS" IsSelected="True"/>
                    </ComboBox>
                </StackPanel>

                <!-- Scan Settings -->
                <TextBlock Text="Scan Settings" 
                           Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                           Margin="0,0,0,16"/>

                <StackPanel Margin="0,0,0,24">
                    <CheckBox x:Name="EnableBackgroundRemovalCheck" 
                              Content="Enable background removal" 
                              IsChecked="True" 
                              Margin="0,0,0,8"/>
                    
                    <CheckBox x:Name="EnableNoiseReductionCheck" 
                              Content="Enable noise reduction" 
                              IsChecked="True" 
                              Margin="0,0,0,8"/>
                    
                    <CheckBox x:Name="EnableMeshSmoothingCheck" 
                              Content="Enable mesh smoothing" 
                              IsChecked="True" 
                              Margin="0,0,0,16"/>

                    <TextBlock Text="Max capture distance (meters)" 
                               Style="{StaticResource MaterialDesignBody1TextBlock}"
                               Margin="0,0,0,8"/>
                    <Slider x:Name="MaxDistanceSlider" 
                            Minimum="0.5" Maximum="5.0" Value="3.0" 
                            TickFrequency="0.1" IsSnapToTickEnabled="True"
                            Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding ElementName=MaxDistanceSlider, Path=Value, StringFormat={}{0:F1}m}" 
                               Style="{StaticResource MaterialDesignCaptionTextBlock}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,16"/>

                    <TextBlock Text="Frames to capture per scan" 
                               Style="{StaticResource MaterialDesignBody1TextBlock}"
                               Margin="0,0,0,8"/>
                    <Slider x:Name="FramesToCaptureSlider" 
                            Minimum="10" Maximum="500" Value="100" 
                            TickFrequency="10" IsSnapToTickEnabled="True"
                            Margin="0,0,0,8"/>
                    <TextBlock Text="{Binding ElementName=FramesToCaptureSlider, Path=Value, StringFormat={}{0} frames}" 
                               Style="{StaticResource MaterialDesignCaptionTextBlock}"
                               HorizontalAlignment="Center"/>
                </StackPanel>

                <!-- Export Settings -->
                <TextBlock Text="Export Settings" 
                           Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                           Margin="0,0,0,16"/>

                <StackPanel Margin="0,0,0,24">
                    <TextBlock Text="Default export location:" 
                               Style="{StaticResource MaterialDesignBody1TextBlock}"
                               Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="ExportPathTextBox" 
                                 Text="C:\Users\Public\Documents\3DScans" 
                                 Grid.Column="0"
                                 Margin="0,0,8,0"/>
                        <Button Content="Browse" 
                                Grid.Column="1"
                                Style="{StaticResource MaterialDesignOutlinedButton}"
                                Click="BrowseExportPath_Click"/>
                    </Grid>

                    <CheckBox x:Name="AutoExportCheck" 
                              Content="Auto-export after scan" 
                              IsChecked="True" 
                              Margin="0,0,0,8"/>
                    
                    <CheckBox x:Name="ExportPlyCheck" 
                              Content="Export PLY files" 
                              IsChecked="True" 
                              Margin="0,0,0,8"/>
                    
                    <CheckBox x:Name="ExportStlCheck" 
                              Content="Export STL files" 
                              IsChecked="True" 
                              Margin="0,0,0,8"/>
                    
                    <CheckBox x:Name="ExportObjCheck" 
                              Content="Export OBJ files" 
                              IsChecked="False" 
                              Margin="0,0,0,8"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,24,0,0">
            <Button Content="Reset to Defaults" 
                    Style="{StaticResource MaterialDesignFlatButton}"
                    Click="ResetDefaults_Click"
                    Margin="0,0,8,0"/>
            <Button Content="Cancel" 
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="Cancel_Click"
                    Margin="0,0,8,0"/>
            <Button Content="OK" 
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Click="OK_Click"
                    IsDefault="True"/>
        </StackPanel>
    </Grid>
</Window>
